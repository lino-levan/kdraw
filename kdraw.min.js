class KDRAW{constructor(){this.canvas=document.getElementById("kdraw"),this.ctx=this.canvas.getContext("2d"),this.ctx.lineCap="round",this.ctx.font="12px Arial",this.initTime=new Date,this.frameRate=30,window.addEventListener("keydown",e=>{this.keydown(e)}),window.addEventListener("keyup",e=>{this.keyup(e)}),this.canvas.addEventListener("mousemove",e=>{this.mousemove(e)}),this.canvas.addEventListener("mousedown",e=>{this.mousedown(e)}),this.canvas.addEventListener("mouseup",e=>{this.mouseup(e)}),this.canvas.addEventListener("drag",e=>{this.drag(e)}),this.canvas.addEventListener("mouseout",e=>{this.mouseout(e)}),this.canvas.addEventListener("mouseover",e=>{this.mouseover(e)}),this.canvas.addEventListener("click",e=>{this.click(e)}),this.draw()}defined(e){return void 0!==e}draw(){frameCount++,"function"==typeof draw&&draw(),pmouseX=mouseX,pmouseY=mouseY,setTimeout(()=>{this.draw()},1e3/this.frameRate)}keydown(e){keyCode=e.which||e.keyCode,key.code=e.which||e.keyCode,key.toString=(()=>e.key),keyIsPressed=!0,"function"==typeof keyPressed&&keyPressed(),"function"==typeof keyTyped&&keyTyped()}keyup(e){keyCode=e.which||e.keyCode,key.code=e.which||e.keyCode,keyIsPressed=!1,"function"==typeof keyReleased&&keyReleased()}mousemove(e){var t=this.canvas.getBoundingClientRect();mouseX=e.clientX-t.left,mouseY=e.clientY-t.top,"function"==typeof mouseMoved&&mouseMoved()}mousedown(e){mouseButton=e.buttons,mouseIsPressed=!0,"function"==typeof mousePressed&&mousePressed()}mouseup(e){mouseButton=e.buttons,mouseIsPressed=!1,"function"==typeof mouseReleased&&mouseReleased()}drag(e){"function"==typeof mouseDragged&&mouseDragged()}mouseout(e){"function"==typeof mouseOut&&mouseOut()}mouseover(e){"function"==typeof mouseOver&&mouseOver()}click(e){mouseButton=e.buttons,"function"==typeof mouseClicked&&mouseClicked()}}var kdraw=new KDRAW;function rect(e,t,n,r,a){kdraw.defined(a)?(n<2*a&&(a=n/2),r<2*a&&(a=r/2),kdraw.ctx.beginPath(),kdraw.ctx.moveTo(e+a,t),kdraw.ctx.arcTo(e+n,t,e+n,t+r,a),kdraw.ctx.arcTo(e+n,t+r,e,t+r,a),kdraw.ctx.arcTo(e,t+r,e,t,a),kdraw.ctx.arcTo(e,t,e+n,t,a),kdraw.ctx.closePath(),kdraw.ctx.fill(),kdraw.ctx.stroke()):(kdraw.ctx.fillRect(e,t,n,r),kdraw.ctx.strokeRect(e,t,n,r))}function triangle(e,t,n,r,a,o){kdraw.ctx.beginPath(),kdraw.ctx.moveTo(e,t),kdraw.ctx.lineTo(n,r),kdraw.ctx.lineTo(a,o),kdraw.ctx.lineTo(e,t),kdraw.ctx.stroke()}function point(e,t){kdraw.ctx.beginPath(),kdraw.ctx.ellipse(e,t,1,1,0,0,2*Math.PI),kdraw.ctx.stroke()}function ellipse(e,t,n,r){kdraw.ctx.beginPath(),kdraw.ctx.ellipse(e,t,Math.abs(n/2),Math.abs(r/2),0,0,2*Math.PI),kdraw.ctx.fill(),kdraw.ctx.stroke()}function line(e,t,n,r){kdraw.ctx.beginPath(),kdraw.ctx.moveTo(e,t),kdraw.ctx.lineTo(n,r),kdraw.ctx.stroke()}function arc(e,t,n,r,a,o){kdraw.ctx.beginPath(),"degrees"===angleMode?kdraw.ctx.ellipse(e,t,Math.abs(n/2),Math.abs(r/2),0,radians(a),radians(o)):"radians"===angleMode&&kdraw.ctx.ellipse(e,t,Math.abs(n/2),Math.abs(r/2),0,a,o),kdraw.ctx.fill(),kdraw.ctx.stroke()}function quad(e,t,n,r,a,o,i,s){kdraw.ctx.beginPath(),kdraw.ctx.moveTo(e,t),kdraw.ctx.lineTo(n,r),kdraw.ctx.lineTo(a,o),kdraw.ctx.lineTo(i,s),kdraw.ctx.lineTo(e,t),kdraw.ctx.fill(),kdraw.ctx.stroke()}function background(e,t,n){let r=kdraw.ctx.fillStyle;fill(e,t,n),kdraw.ctx.fillRect(0,0,kdraw.canvas.width,kdraw.canvas.height),kdraw.ctx.fillStyle=r}function noFill(){kdraw.ctx.fillStyle="rgba(0,0,0,0)"}function strokeWeight(e){kdraw.ctx.lineWidth=e}function color(e,t,n,r){return{red:e,green:kdraw.defined(n)?t:e,blue:kdraw.defined(n)?n:e,alpha:kdraw.defined(r)?r:255}}function fill(e,t,n,r){"object"==typeof e?kdraw.ctx.fillStyle=`rgba(${e.red},${e.green},${e.blue},${e.alpha/255})`:kdraw.defined(r)?(console.log(r),kdraw.ctx.fillStyle=`rgba(${e},${t},${n},${r/255})`):kdraw.defined(n)?kdraw.ctx.fillStyle=`rgb(${e},${t},${n})`:kdraw.ctx.fillStyle=`rgb(${e},${e},${e})`}function stroke(e,t,n,r){"object"==typeof e?kdraw.ctx.strokeStyle=`rgba(${e.red},${e.green},${e.blue},${e.alpha/255})`:kdraw.defined(r)?kdraw.ctx.strokeStyle=`rgba(${e},${t},${n},${r/255})`:kdraw.defined(n)?kdraw.ctx.strokeStyle=`rgb(${e},${t},${n})`:kdraw.ctx.strokeStyle=`rgb(${e},${e},${e})`}function noStroke(){kdraw.ctx.strokeStyle="rgba(0,0,0,0)"}function red(e){return e.red}function green(e){return e.green}function blue(e){return e.blue}function alpha(e){return e.alpha}function text(e,t,n){if("string"==typeof e){e.split("\n").forEach((e,r)=>{kdraw.ctx.fillText(e,t,n+r*parseInt(kdraw.ctx.font.split("px")[0]))})}}function textSize(e){kdraw.ctx.font=e+"px Arial"}function textWidth(e){return kdraw.ctx.measureText(e).width}function rotate(e){"degrees"===angleMode?kdraw.ctx.rotate(radians(e)):"radians"===angleMode&&kdraw.ctx.rotate(e)}function translate(e,t){kdraw.ctx.translate(e,t)}function scale(e,t){kdraw.defined(t)?kdraw.ctx.scale(e,t):kdraw.ctx.scale(e,e)}function pushMatrix(){kdraw.ctx.save()}function popMatrix(){kdraw.ctx.restore()}function resetMatrix(){kdraw.ctx.resetTransform()}const width=kdraw.canvas.width,height=kdraw.canvas.height;function frameRate(e){kdraw.frameRate=e}var frameCount=0,mouseX=0,mouseY=0,mouseButton=0,pmouseX=0,pmouseY=0,mouseIsPressed=!1,key={code:0,toString:()=>""},keyIsPressed=!1,keyCode=0;function random(e,t){return map(Math.random(),0,1,e,t)}function constrain(e,t,n){return e<t?t:e>n?n:e}function max(e,t){return Math.max(e,t)}function log(e){return Math.log(e)}function sq(e){return e*e}function round(e){return Math.round(e)}function floor(e){return Math.floor(e)}function dist(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function min(e,t){return Math.min(e,t)}function abs(e){return Math.abs(e)}function pow(e,t){return Math.pow(e,t)}function sqrt(e){return Math.sqrt(e)}function ceil(e){return Math.ceil(e)}class PVector{constructor(e,t){this.x=e,this.y=t}get(){return new PVector(this.x,this.y)}set(e,t){kdraw.defined(t)?(this.x=e,this.y=t):e.constructor===Array?(this.x=e[0],this.y=t[0]):(this.x=e.x,this.x=e.y)}mag(){return mag(this.x,this.y)}add(e,t){if(kdraw.defined(t)){if(t instanceof PVector)return new PVector(e.x+t.x,e.y+t.y);this.x+=e,this.y+=t}else this.x+=e.x,this.y+=e.y}sub(e,t){if(kdraw.defined(t)){if(t instanceof PVector)return new PVector(e.x-t.x,e.y-t.y);this.x-=e,this.y-=t}else this.x-=e.x,this.y-=e.y}mult(e,t){if(kdraw.defined(t))return t instanceof PVector?new PVector(e.x*t.x,e.y*t.y):new PVector(e.x*t,e.y*t);e instanceof PVector?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=t)}div(e,t){if(kdraw.defined(t))return t instanceof PVector?new PVector(e.x/t.x,e.y/t.y):new PVector(e.x/t,e.y/t);e instanceof PVector?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=t)}dist(e,t){return kdraw.defined(t)?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}dot(e){return this.mag()*e.mag()*Math.cos(this.angleBetween(this,e))}normalize(){let e=sqrt(this.x*this.x+this.y*this.y);this.x/=e,this.y/=e}limit(e){this.normalize(),this.x*=e,this.y*=e}array(){return[this.x,this.y]}rotate(e){}angleBetween(e,t){return Math.abs(e.heading()-t.heading())}heading(){return atan2(this.y,this.x)}}function mag(e,t){return dist(0,0,e,t)}function exp(e){return pow(Math.E,e)}function map(e,t,n,r,a){return r+(e-t)/(n-t)*(a-r)}function norm(e,t,n){return map(e,t,n,0,1)}function lerp(e,t,n){return e+(e-t)*n}function cos(e){return"degrees"===angleMode?Math.cos(radians(e)):"radians"===angleMode?Math.cos(e):void 0}function tan(e){return"degrees"===angleMode?Math.tan(radians(e)):"radians"===angleMode?Math.tan(e):void 0}function sin(e){return"degrees"===angleMode?Math.sin(radians(e)):"radians"===angleMode?Math.sin(e):void 0}function acos(e){return"degrees"===angleMode?degrees(Math.acos(e)):"radians"===angleMode?Math.acos(e):void 0}function asin(e){return"degrees"===angleMode?degrees(Math.asin(e)):"radians"===angleMode?Math.asin(e):void 0}function atan(e){return"degrees"===angleMode?180*Math.atan(e)/Math.PI:"radians"===angleMode?Math.atan(e):void 0}function atan2(e,t){return"degrees"===angleMode?degrees(Math.atan2(e,t)):"radians"===angleMode?Math.atan2(e,t):void 0}function radians(e){return e*Math.PI/180}function degrees(e){return 180*e/Math.PI}var angleMode="degrees";function day(){return(new Date).getDay()}function month(){return(new Date).getMonth()}function year(){return(new Date).getFullYear()}function millis(){return new Date-kdraw.initTime}function hour(){return(new Date).getHours()}function minute(){return(new Date).getMinutes()}function second(){return(new Date).getSeconds()}function debug(){console.log(...args)}function print(e){console.log(e)}function println(e){console.log(e)}const UP=38,DOWN=40,LEFT=37,RIGHT=39,ALT=18,CONTROL=17,SHIFT=16;function cursor(e){kdraw.defined(e)?kdraw.canvas.style.cursor=e:kdraw.canvas.style.cursor="default"}function noCursor(){kdraw.canvas.style.cursor="none"}