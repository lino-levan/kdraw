var KDRAW=function(){var $jscomp$this=this;this.canvas=document.getElementById("kdraw");this.ctx=this.canvas.getContext("2d");this.ctx.lineCap="round";this.ctx.font="12px Arial";this.initTime=new Date;this.frameRate=30;window.addEventListener("keydown",function(e){$jscomp$this.keydown(e)});window.addEventListener("keyup",function(e){$jscomp$this.keyup(e)});this.canvas.addEventListener("mousemove",function(e){$jscomp$this.mousemove(e)});this.canvas.addEventListener("mousedown",function(e){$jscomp$this.mousedown(e)});
this.canvas.addEventListener("mouseup",function(e){$jscomp$this.mouseup(e)});this.canvas.addEventListener("drag",function(e){$jscomp$this.drag(e)});this.canvas.addEventListener("mouseout",function(e){$jscomp$this.mouseout(e)});this.canvas.addEventListener("mouseover",function(e){$jscomp$this.mouseover(e)});this.canvas.addEventListener("click",function(e){$jscomp$this.click(e)});this.canvas.addEventListener("contextmenu",function(e){return e.preventDefault()});this.draw()};
KDRAW.prototype.defined=function(d){return typeof d!=="undefined"};KDRAW.prototype.draw=function(){var $jscomp$this=this;frameCount++;if(typeof draw==="function")draw();pmouseX=mouseX;pmouseY=mouseY;setTimeout(function(){$jscomp$this.draw()},1E3/this.frameRate)};
KDRAW.prototype.keydown=function(e){var k=e.which||e.keyCode;if(e.code.substring(0,3)==="Key"){k+=32;if(e.shiftKey)k-=32}keyCode=k;key.code=k;key.toString=function(){return e.key};keyIsPressed=true;if(typeof keyPressed==="function")keyPressed();if(typeof keyTyped==="function")keyTyped()};KDRAW.prototype.keyup=function(e){var k=e.which||e.keyCode;if(e.code.substring(0,3)==="Key"){k+=32;if(e.shiftKey)k-=32}keyCode=k;key.code=k;keyIsPressed=false;if(typeof keyReleased==="function")keyReleased()};
KDRAW.prototype.mousemove=function(e){var rect=this.canvas.getBoundingClientRect();mouseX=e.clientX-rect.left;mouseY=e.clientY-rect.top;if(typeof mouseMoved==="function")mouseMoved()};KDRAW.prototype.mousedown=function(e){e.preventDefault();var button=e.buttons;button=button===1?37:button;button=button===2?39:button;button=button===4?3:button;button=button===0?mouseButton:button;mouseButton=button;mouseIsPressed=true;if(typeof mousePressed==="function")mousePressed()};
KDRAW.prototype.mouseup=function(e){e.preventDefault();var button=e.buttons;button=button===1?37:button;button=button===2?39:button;button=button===4?3:button;button=button===0?mouseButton:button;mouseButton=button;mouseIsPressed=false;if(typeof mouseReleased==="function")mouseReleased()};KDRAW.prototype.drag=function(e){if(typeof mouseDragged==="function")mouseDragged()};KDRAW.prototype.mouseout=function(e){if(typeof mouseOut==="function")mouseOut()};
KDRAW.prototype.mouseover=function(e){if(typeof mouseOver==="function")mouseOver()};KDRAW.prototype.click=function(e){e.preventDefault();mouseButton=e.buttons;if(typeof mouseClicked==="function")mouseClicked()};var kdraw=new KDRAW;
function rect(x,y,w,h,r){if(kdraw.defined(r)){if(w<2*r)r=w/2;if(h<2*r)r=h/2;kdraw.ctx.beginPath();kdraw.ctx.moveTo(x+r,y);kdraw.ctx.arcTo(x+w,y,x+w,y+h,r);kdraw.ctx.arcTo(x+w,y+h,x,y+h,r);kdraw.ctx.arcTo(x,y+h,x,y,r);kdraw.ctx.arcTo(x,y,x+w,y,r);kdraw.ctx.closePath();kdraw.ctx.fill();kdraw.ctx.stroke()}else{kdraw.ctx.fillRect(x,y,w,h);kdraw.ctx.strokeRect(x,y,w,h)}}
function triangle(x1,y1,x2,y2,x3,y3){kdraw.ctx.beginPath();kdraw.ctx.moveTo(x1,y1);kdraw.ctx.lineTo(x2,y2);kdraw.ctx.lineTo(x3,y3);kdraw.ctx.lineTo(x1,y1);kdraw.ctx.stroke()}function point(x,y){kdraw.ctx.beginPath();kdraw.ctx.ellipse(x,y,1,1,0,0,Math.PI*2);kdraw.ctx.stroke()}function ellipse(x,y,w,h){kdraw.ctx.beginPath();kdraw.ctx.ellipse(x,y,Math.abs(w/2),Math.abs(h/2),0,0,2*Math.PI);kdraw.ctx.fill();kdraw.ctx.stroke()}
function line(x1,y1,x2,y2){kdraw.ctx.beginPath();kdraw.ctx.moveTo(x1,y1);kdraw.ctx.lineTo(x2,y2);kdraw.ctx.stroke()}function arc(x,y,w,h,startA,endA){kdraw.ctx.beginPath();if(angleMode==="degrees")kdraw.ctx.ellipse(x,y,Math.abs(w/2),Math.abs(h/2),0,radians(startA),radians(endA));else if(angleMode==="radians")kdraw.ctx.ellipse(x,y,Math.abs(w/2),Math.abs(h/2),0,startA,endA);kdraw.ctx.fill();kdraw.ctx.stroke()}
function quad(x1,y1,x2,y2,x3,y3,x4,y4){kdraw.ctx.beginPath();kdraw.ctx.moveTo(x1,y1);kdraw.ctx.lineTo(x2,y2);kdraw.ctx.lineTo(x3,y3);kdraw.ctx.lineTo(x4,y4);kdraw.ctx.lineTo(x1,y1);kdraw.ctx.fill();kdraw.ctx.stroke()}function background(r,g,b){var fillStyle=kdraw.ctx.fillStyle;fill(r,g,b);kdraw.ctx.fillRect(0,0,kdraw.canvas.width,kdraw.canvas.height);kdraw.ctx.fillStyle=fillStyle}function noFill(){kdraw.ctx.fillStyle="rgba(0,0,0,0)"}function strokeWeight(w){kdraw.ctx.lineWidth=w}
function color(r,g,b,a){return{red:r,green:kdraw.defined(b)?g:r,blue:kdraw.defined(b)?b:r,alpha:kdraw.defined(a)?a:255}}function lerpColor(c1,c2,amount){function findAverage(attribute){return c1[attribute]*amount+c2[attribute]*(1-amount)}return color(findAverage("red"),findAverage("green"),findAverage("blue"),findAverage("alpha"))}
function fill(r,g,b,a){if(typeof r==="object")kdraw.ctx.fillStyle="rgba("+r.red+","+r.green+","+r.blue+","+r.alpha/255+")";else if(kdraw.defined(a))kdraw.ctx.fillStyle="rgba("+r+","+g+","+b+","+a/255+")";else if(kdraw.defined(b))kdraw.ctx.fillStyle="rgb("+r+","+g+","+b+")";else kdraw.ctx.fillStyle="rgb("+r+","+r+","+r+")"}
function stroke(r,g,b,a){if(typeof r==="object")kdraw.ctx.strokeStyle="rgba("+r.red+","+r.green+","+r.blue+","+r.alpha/255+")";else if(kdraw.defined(a))kdraw.ctx.strokeStyle="rgba("+r+","+g+","+b+","+a/255+")";else if(kdraw.defined(b))kdraw.ctx.strokeStyle="rgb("+r+","+g+","+b+")";else kdraw.ctx.strokeStyle="rgb("+r+","+r+","+r+")"}function noStroke(){kdraw.ctx.strokeStyle="rgba(0,0,0,0)"}function red(c){return c.red}function green(c){return c.green}function blue(c){return c.blue}
function alpha(c){return c.alpha}function text(text,x,y){if(typeof text==="string"){var split=text.split("\n");split.forEach(function(txt,i){kdraw.ctx.fillText(txt,x,y+i*parseInt(kdraw.ctx.font.split("px")[0]))})}}function textSize(s){kdraw.ctx.font=s+"px Arial"}function textWidth(txt){return kdraw.ctx.measureText(txt).width}function rotate(a){if(angleMode==="degrees")kdraw.ctx.rotate(radians(a));else if(angleMode==="radians")kdraw.ctx.rotate(a)}function translate(x,y){kdraw.ctx.translate(x,y)}
function scale(x,y){if(kdraw.defined(y))kdraw.ctx.scale(x,y);else kdraw.ctx.scale(x,x)}function pushMatrix(){kdraw.ctx.save()}function popMatrix(){kdraw.ctx.restore()}function resetMatrix(){kdraw.ctx.resetTransform()}var width=kdraw.canvas.width;var height=kdraw.canvas.height;function frameRate(n){kdraw.frameRate=n}var frameCount=0;var mouseX=0;var mouseY=0;var mouseButton=0;var pmouseX=0;var pmouseY=0;var mouseIsPressed=false;var key={code:0,toString:function(){return""}};var keyIsPressed=false;
var keyCode=0;function random(start,end){return map(Math.random(),0,1,start,end)}function constrain(v,min,max){if(v<min)return min;else if(v>max)return max;else return v}function max(v1,v2){return Math.max(v1,v2)}function log(v){return Math.log(v)}function sq(v){return v*v}function round(val){return Math.round(val)}function floor(val){return Math.floor(val)}function dist(x1,y1,x2,y2){return Math.sqrt(Math.pow(x1-x2,2)+Math.pow(y1-y2,2))}function min(v1,v2){return Math.min(v1,v2)}
function abs(v){return Math.abs(v)}function pow(v1,v2){return Math.pow(v1,v2)}function sqrt(v){return Math.sqrt(v)}function ceil(val){return Math.ceil(val)}var PVector=function(x,y){this.x=x;this.y=y};PVector.prototype.get=function(){return new PVector(this.x,this.y)};PVector.prototype.set=function(x,y){if(kdraw.defined(y)){this.x=x;this.y=y}else if(x.constructor===Array){this.x=x[0];this.y=y[0]}else{this.x=x.x;this.x=x.y}};PVector.prototype.mag=function(){return mag(this.x,this.y)};
PVector.prototype.add=function(x,y){if(kdraw.defined(y))if(y instanceof PVector)return new PVector(x.x+y.x,x.y+y.y);else{this.x+=x;this.y+=y}else{this.x+=x.x;this.y+=x.y}};PVector.prototype.sub=function(x,y){if(kdraw.defined(y))if(y instanceof PVector)return new PVector(x.x-y.x,x.y-y.y);else{this.x-=x;this.y-=y}else{this.x-=x.x;this.y-=x.y}};
PVector.prototype.mult=function(x,y){if(kdraw.defined(y))if(y instanceof PVector)return new PVector(x.x*y.x,x.y*y.y);else return new PVector(x.x*y,x.y*y);else if(x instanceof PVector){this.x*=x.x;this.y*=x.y}else{this.x*=x;this.y*=y}};PVector.prototype.div=function(x,y){if(kdraw.defined(y))if(y instanceof PVector)return new PVector(x.x/y.x,x.y/y.y);else return new PVector(x.x/y,x.y/y);else if(x instanceof PVector){this.x/=x.x;this.y/=x.y}else{this.x/=x;this.y/=y}};
PVector.prototype.dist=function(v1,v2){if(kdraw.defined(v2))return Math.sqrt(Math.pow(v2.x-v1.x,2)+Math.pow(v2.y-v1.y,2));else return Math.sqrt(Math.pow(this.x-v1.x,2)+Math.pow(this.y-v1.y,2))};PVector.prototype.dot=function(v){return this.mag()*v.mag()*Math.cos(this.angleBetween(this,v))};PVector.prototype.normalize=function(){var length=sqrt(this.x*this.x+this.y*this.y);this.x/=length;this.y/=length};PVector.prototype.limit=function(m){this.normalize();this.x*=m;this.y*=m};
PVector.prototype.array=function(){return[this.x,this.y]};PVector.prototype.rotate=function(a){};PVector.prototype.angleBetween=function(v1,v2){return Math.abs(v1.heading()-v2.heading())};PVector.prototype.heading=function(){return atan2(this.y,this.x)};function mag(x,y){return dist(0,0,x,y)}function exp(p){return pow(Math.E,p)}function map(value,min,max,start,end){return start+(end-start)*((value-min)/(max-min))}function norm(value,low,high){return map(value,low,high,0,1)}
function lerp(x1,x2,amount){return x1+(x1-x2)*amount}function noise(x,y){return random(0,1)}function cos(v){if(angleMode==="degrees")return Math.cos(radians(v));else if(angleMode==="radians")return Math.cos(v)}function tan(v){if(angleMode==="degrees")return Math.tan(radians(v));else if(angleMode==="radians")return Math.tan(v)}function sin(v){if(angleMode==="degrees")return Math.sin(radians(v));else if(angleMode==="radians")return Math.sin(v)}
function acos(v){if(angleMode==="degrees")return degrees(Math.acos(v));else if(angleMode==="radians")return Math.acos(v)}function asin(v){if(angleMode==="degrees")return degrees(Math.asin(v));else if(angleMode==="radians")return Math.asin(v)}function atan(v){if(angleMode==="degrees")return Math.atan(v)*180/Math.PI;else if(angleMode==="radians")return Math.atan(v)}function atan2(y,x){if(angleMode==="degrees")return degrees(Math.atan2(y,x));else if(angleMode==="radians")return Math.atan2(y,x)}
function radians(a){return a*Math.PI/180}function degrees(a){return a*180/Math.PI}var angleMode="degrees";function day(){return(new Date).getDay()}function month(){return(new Date).getMonth()}function year(){return(new Date).getFullYear()}function millis(){return new Date-kdraw.initTime}function hour(){return(new Date).getHours()}function minute(){return(new Date).getMinutes()}function second(){return(new Date).getSeconds()}
function debug(){console.log.apply(console,$jscomp.arrayFromIterable(args))}function print(data){console.log(data)}function println(data){console.log(data)}var UP=38;var DOWN=40;var LEFT=37;var RIGHT=39;var ALT=18;var CONTROL=17;var SHIFT=16;var CENTER=3;function cursor(type){if(kdraw.defined(type))kdraw.canvas.style.cursor=type;else kdraw.canvas.style.cursor="default"}function noCursor(){kdraw.canvas.style.cursor="none"};
